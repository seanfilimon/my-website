// Agent conversation threads and messages for real-time chat

model AgentThread {
  id        String   @id @default(cuid())
  userId    String
  title     String?
  metadata  Json?    // Store content type, context, etc.
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  messages  AgentMessage[]

  @@index([userId])
  @@index([createdAt])
  @@map("agent_threads")
}

model AgentMessage {
  id        String   @id @default(cuid())
  threadId  String
  thread    AgentThread @relation(fields: [threadId], references: [id], onDelete: Cascade)
  role      String   // "user" | "assistant" | "system" | "tool"
  content   String   @db.Text
  metadata  Json?    // tool calls, agent name, generated content, etc.
  createdAt DateTime @default(now())

  @@index([threadId])
  @@index([createdAt])
  @@map("agent_messages")
}
